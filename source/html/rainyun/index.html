<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>石墨烯积木博客专属 - 雨云优惠券</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="rainyun-coupon.css">
</head>
<body>
    <!-- 云朵背景 -->
    <div class="clouds">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
    </div>

    <!-- 雨滴效果 -->
    <div class="rain" id="rain"></div>

    <div id="app">
        <div class="card">
            <h1>🌧️ 雨云专属优惠</h1>
            <p class="subtitle">领取一张首月5折优惠券</p>

            <a :href="registerUrl"
               target="_blank"
               class="btn">
                <div class="btn-wrapper">
                    <div class="btn-text">立即注册领取</div>
                    <span class="btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
                            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17"></path>
                        </svg>
                    </span>
                </div>
            </a>

            <div style="margin: 20px 0; color: #666; font-size: 0.9em;">
                —— 或者 ——
            </div>

            <div class="coupon-code">
                <div class="code">{{ couponCode }}</div>
                <button
                    class="copy-btn"
                    :class="{ copied: isCopied }"
                    @click="copyCode">
                    <span class="copy-btn-lg">
                        <span class="copy-btn-sl"></span>
                        <span class="copy-btn-text">{{ copyButtonText }}</span>
                    </span>
                </button>
            </div>

            <div class="notice">
                <strong>使用说明：</strong><br>
                • 优先使用上方注册按钮，自动获得优惠<br>
                • 或手动复制优惠码在注册时填写<br>
                • 适用于大部分云服务器产品
            </div>

            <div style="margin-top: 20px;">
                <a href="/" class="back-btn">🏠 返回博客主页</a>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        // 创建雨滴效果
        function createRaindrops() {
            const rainContainer = document.getElementById('rain');
            const numRaindrops = 50;

            for (let i = 0; i < numRaindrops; i++) {
                const raindrop = document.createElement('div');
                raindrop.className = 'raindrop';

                // 随机位置和高度
                const left = Math.random() * 100;
                const height = Math.random() * 20 + 10;
                const animationDuration = Math.random() * 2 + 1;
                const animationDelay = Math.random() * 2;

                raindrop.style.left = left + '%';
                raindrop.style.height = height + 'px';
                raindrop.style.animationDuration = animationDuration + 's';
                raindrop.style.animationDelay = animationDelay + 's';

                rainContainer.appendChild(raindrop);
            }
        }

        createApp({
            setup() {
                const couponCode = ref('NjQ4NjU3');
                const registerUrl = ref('https://www.rainyun.com/NjQ4NjU3_?s=blog-hexo');
                const isCopied = ref(false);

                const copyButtonText = computed(() => {
                    return isCopied.value ? '✅ 已复制' : '复制优惠码';
                });

                const copyCode = async () => {
                    try {
                        await navigator.clipboard.writeText(couponCode.value);
                        isCopied.value = true;

                        setTimeout(() => {
                            isCopied.value = false;
                        }, 2000);
                    } catch (err) {
                        console.error('复制失败：', err);
                        // 降级方案：选择文本
                        const textArea = document.createElement('textarea');
                        textArea.value = couponCode.value;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);

                        isCopied.value = true;
                        setTimeout(() => {
                            isCopied.value = false;
                        }, 2000);
                    }
                };

                onMounted(() => {
                    createRaindrops();
                });

                return {
                    couponCode,
                    registerUrl,
                    isCopied,
                    copyButtonText,
                    copyCode
                };
            }
        }).mount('#app');
    </script>
</body>
</html>